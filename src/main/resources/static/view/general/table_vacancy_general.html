<!-- Navbar -->
<div ng-init="ctrlTableVacancyGeneral.findAllVacancies()"></div>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <!-- Container wrapper -->
    <div class="container">

        <!-- Navbar brand -->
        <a class="navbar-brand me-2" href="./landing.html">
            <!--   <img src="https://mdbootstrap.com/img/logo/mdb-transaprent-noshadows.webp" height="16" alt="" loading="lazy"
              style="margin-top: -1px;" />-->

            <img src="./img/image 1.png" width="10%"><b>POETA</b>
        </a>


        <!-- Toggle button -->
        <button class="navbar-toggler" type="button" (click)="buttonsNav.toggle()" aria-expanded="false"
            aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
        </button>


        <!-- Collapsible wrapper -->
        <div class="collapse navbar-collapse" id="navbarButtonsExample" mdbCollapse #buttonsNav="mdbCollapse">
            <!-- Left links -->
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
            </ul>


            <!-- Left links -->

            <div class="d-flex align-items-center">
                <button type="button" class="btn btn-primary px-3 me-2">
                    Ingresar
                </button>
                <button type="button" class="btn btn-warning me-3">
                    Registrarme </button>
            </div>

            <form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Buscar</button>
            </form>
            <div class="dropdown">

                <img id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false"
                    src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg"
                    width="40" height="40" class="rounded-circle">

                <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <div class="user-dd animated flipInY show " data-bs-popper="none"
                        style="width: 300px; height: 200px;">
                        <div class="d-flex align-items-center p-3 bg-info text-white">
                            <div class="">
                                <img src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg"
                                    alt="user" class="rounded-circle" width="40">
                            </div>
                            <div class="ms-2">
                                <h4 class="mb-0 text-white">Foxy Alviter</h4>
                                <p class="mb-0">angeelu23@gmail.com</p>
                            </div>
                        </div>
                        <a class="dropdown-item" href="#">Mi Perfil</a>

                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Salir</a>
                    </div>
                </ul>
            </div>
        </div>
        <!-- Collapsible wrapper -->

    </div>

    <!--Container wrapper -->


</nav>


<div style="margin-left: 5%;margin-right: 5%">

    <div class="row ">
        <h2 style="padding-top: 30px; text-align: center;" class="col-md-10">Vacantes Disponibles</h2>
    </div>

    <table class="table" id="vacancies">
        <thead style="    background: linear-gradient(90deg,#048abf,#2cc1fc);
            color: #fff;
            ">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Título</th>
                <th scope="col">Descripción</th>
                <th scope="col">Estatus</th>
                <th scope="col">Estado</th>
                <th scope="col">Salario</th>
                <th scope="col">Opciones</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="vacancy in vacancies" repeat-done="initDataTable">
                <td scope="col">{{$index+1}}</td>
                <td scope="col">{{vacancy.title | limitTo: 30}}{{vacancy.title.length > 30 ? '...' : ''}}</td>
                <td scope="col">{{vacancy.description | limitTo: 30}}{{vacancy.description.length > 30 ? '...' : ''}}
                </td>
                <td scope="col">
                    <span class="badge bg-success" ng-if="vacancy.status == 1">Vigente</span>
                    <span class="badge bg-danger" ng-if="vacancy.status == 0">Vencido</span>
                </td>
                <td scope="col">{{vacancy.city.state.name}}</td>
                <td scope="col">${{vacancy.minSalary}} - ${{vacancy.maxSalary}}</td>
                <td scope="col">
                    <button type="button" class="btn btn-secondary btn-sm px-3" title="Detalles"
                        data-placement="left" data-bs-toggle="modal" data-bs-target="#modalDetalles" ng-click="ctrlTableVacancyGeneral.findVacancy(vacancy.id)"><i class="fa fa-eye"></i></button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Inicio Modal Detalles -->
<div class="modal fade" id="modalDetalles" tabindex="-1"  aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" >Detalles de la Vacante</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-12">
                <b>Título:</b> <span class="text-wrap">{{vacancy.title}}</span>
            </div>
            <div class="col-12 mt-3">
                <b>Descripción:</b> <span class="text-wrap">{{vacancy.description}}</span>
            </div>
            <div class="col-6 mt-3">
                <b>Fin de la Vacante:</b> <span class="text-wrap">{{vacancy.dateEnd | date:'dd/MMM/yyyy'}}</span>
            </div>
            <div class="col-6 mt-3">
                <b>Inicio del Trabajo:</b> <span class="text-wrap">{{vacancy.jobStartDate | date: 'dd/MMM/yyyy'}}</span>
            </div>
            <div class="col-6 mt-3">
                <b>Estado:</b> <span class="text-wrap">{{vacancy.city.state.name}}</span>
            </div>
            <div class="col-6 mt-3">
                <b>Municipio:</b> <span class="text-wrap">{{vacancy.city.name}}</span>
            </div>
            <div class="col-4 mt-3">
                <b>Salario:</b> <span class="text-wrap">${{vacancy.minSalary}} - ${{vacancy.maxSalary}}</span>
            </div>
            <div class="col-4 mt-3">
                <b>Periodo de Pagos:</b> <span class="text-wrap">{{vacancy.paymentPeriod.name}}</span>
            </div>
            <div class="col-4 mt-3">
                <b>Horario:</b> <span class="text-wrap">{{vacancy.type.name}}</span>
            </div>
            <div class="col-12 mt-3">
                <b>Beneficios:</b> <span class="text-wrap">{{vacancy.benefits}}</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          <button type="button" id="registerBtn" class="btn btn-primary" ng-click="ctrlTableVacancyGeneral.register(vacancy)">Postularme</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Fin Modal Detalles -->